import { DayCurriculum } from '@/types';

export const day5: DayCurriculum = {
  dayId: 5,
  title: 'チーム活用と卒業',
  description: 'Cursorをチームで活用するためのベストプラクティスを学び、卒業チャレンジに挑戦しよう',
  emoji: '🎓',
  quests: [
    {
      id: 'day5-quest1',
      dayId: 5,
      title: '.cursorrulesを設定しよう',
      description: 'プロジェクト固有のAI指示を設定する.cursorrulesファイルを作成し、チーム全体の開発効率を向上させよう',
      difficulty: 3,
      estimatedMinutes: 20,
      targetRoles: 'all',
      steps: [
        {
          title: '.cursorrulesファイルの作成',
          content: 'プロジェクトのルートディレクトリで**Cmd+N**を押し、ファイル名を`.cursorrules`として作成する。以下のテンプレートを貼り付ける:\n`# プロジェクトルール\n\n## 技術スタック\n- フレームワーク: Next.js + TypeScript\n- スタイリング: Tailwind CSS\n- 状態管理: React hooks\n\n## コーディング規約\n- コンポーネントはfunction宣言で書く（アロー関数は使わない）\n- 型定義はinterfaceを使う（typeは使わない）\n- 日本語コメントを使用する`',
        },
        {
          title: 'プロジェクト固有のルール設定',
          content: '以下の項目を自分のプロジェクトに合わせて追記する:\n- **使用言語**: `TypeScript strict modeを使用。any型は禁止`\n- **命名規則**: `コンポーネント: PascalCase、関数: camelCase、定数: UPPER_SNAKE_CASE`\n- **ファイル構成**: `コンポーネントはsrc/components/に配置。1ファイル1コンポーネント`\n- **禁止事項**: `console.logを本番コードに残さない。importの*（ワイルドカード）は使わない`\n- **AIへの指示**: `コード生成時は必ずTypeScriptの型を付ける。テストコードも一緒に生成する`',
        },
        {
          title: 'チームで共有する設定',
          content: '以下の手順でチームと共有する:\n- `.cursorrules`を`.gitignore`に含めない（チーム共有するため）\n- ターミナルで`git add .cursorrules && git commit -m "Add .cursorrules for AI coding rules"`を実行\n- チームメンバーに`git pull`してもらう\n**ポイント**: `.cursorrules`はプロジェクトのCONTRIBUTING.mdのAI版。チームの合意を得てから追加する',
        },
      ],
      challenge: '自分のプロジェクト用の.cursorrulesファイルを作成しよう',
      hints: [
        '使用言語、フレームワーク、コーディング規約を明記すると効果的',
        'チームの既存のコーディング規約をベースに作成すると統一性が保てる',
      ],
      checkQuestions: [
        {
          question: '.cursorrulesの目的は？',
          options: [
            'Cursorのテーマを変更する',
            'プロジェクト固有のAI指示を設定する',
            'ファイルのアクセス権限を管理する',
            'Gitのコミットルールを設定する',
          ],
          correctIndex: 1,
          explanation: '.cursorrulesはプロジェクト固有のAI指示を設定するファイルで、AIの応答をプロジェクトに最適化できます',
        },
      ],
    },
    {
      id: 'day5-quest2',
      dayId: 5,
      title: 'MCPを理解しよう',
      description: 'MCP（Model Context Protocol）の概要を理解し、AIに外部ツールを接続する仕組みを学ぼう',
      difficulty: 4,
      estimatedMinutes: 25,
      targetRoles: 'all',
      steps: [
        {
          title: 'MCP（Model Context Protocol）の概要',
          content: 'MCPの基本概念を理解する:\n- **MCPとは**: AIに外部ツール（DB、API、ファイル操作等）を接続するためのプロトコル\n- **たとえ**: AIに「道具箱」を渡すイメージ。道具箱の中身（DB接続、Slack連携等）をAIが自分で選んで使える\n- **メリット**: チャットでの手動コピペが不要になり、AIが直接データを取得・操作できる\n**Cmd+L**で`MCPとは何か、具体例を3つ挙げて分かりやすく説明して`と聞いてみる',
        },
        {
          title: '利用可能なMCPツール',
          content: '代表的なMCPツールを確認する:\n- **ファイルシステム**: プロジェクト内のファイル読み書き\n- **データベース**: PostgreSQL, MySQL等へのクエリ実行\n- **Git**: コミット履歴の確認、diff表示\n- **Slack**: メッセージの送受信\n- **Notion**: ページの読み書き\n**Cmd+L**で`Cursorで使える主要なMCPツールとそれぞれのユースケースを教えて`と依頼する',
        },
        {
          title: '設定方法',
          content: 'CursorでMCPを設定する手順:\n- **Cursor Settings** → **Features** → **MCP** セクションを開く\n- 「Add MCP Server」をクリック\n- 設定ファイル（`mcp.json`）に以下の形式で記述する:\n`{ "mcpServers": { "filesystem": { "command": "npx", "args": ["-y", "@modelcontextprotocol/server-filesystem", "/path/to/project"] } } }`\n設定後、チャットで`MCPツールが使えるか確認して`と聞いて接続を確認する',
        },
        {
          title: 'ユースケースの理解',
          content: '**Cmd+L**（チャット）で以下を依頼する:\n`以下の業務シーンでMCPをどう活用できるか、具体的なユースケースを整理して: 1. 開発中のDB確認（SQLを書かずにデータ確認） 2. Slackでのチーム通知自動化 3. Notionのドキュメント更新 4. GitのPR要約自動生成`\n自分のチームで最も効果が高そうなユースケースを1つ選ぶ',
        },
      ],
      challenge: 'MCPの概要と利点をチームメンバーに説明できるようになろう',
      hints: [
        'MCPは「AIに道具を持たせる」イメージで理解すると分かりやすい',
        '公式ドキュメントを参照しながらAIに質問すると理解が深まる',
      ],
      checkQuestions: [
        {
          question: 'MCPとは？',
          options: [
            'Multiple Cursor Panelの略で、複数カーソルの管理機能',
            'Model Context Protocolの略で、AIに外部ツールを接続する仕組み',
            'Main Code Processorの略で、コードの実行エンジン',
            'Managed Cloud Platformの略で、クラウドサービスの名前',
          ],
          correctIndex: 1,
          explanation: 'MCPはModel Context Protocolの略で、AIに外部ツールを接続する仕組みです。これによりAIがデータベースやAPIなど外部リソースにアクセスできるようになります',
        },
      ],
    },
    {
      id: 'day5-quest3',
      dayId: 5,
      title: 'チームのベストプラクティス',
      description: 'チーム開発でCursorを最大限活用するためのベストプラクティスを学び、ガイドラインを作成しよう',
      difficulty: 3,
      estimatedMinutes: 20,
      targetRoles: 'all',
      steps: [
        {
          title: 'チーム開発でのCursor活用法',
          content: '以下の活用シーンを理解する:\n- **ペアプロ**: 1人がCursorでコード生成、もう1人がレビュー・修正する「AI-Human ペアプロ」\n- **コード生成**: 新機能のボイラープレートをAIに生成させ、チームでカスタマイズ\n- **ドキュメント**: PR説明文やリリースノートをAIに下書きさせる\n- **学習**: 新メンバーが既存コードの説明をAIに聞いてキャッチアップ\n**Cmd+L**で`チーム開発でCursorを活用するベストプラクティスを5つ教えて`と聞いてみる',
        },
        {
          title: 'コードレビューへの活用',
          content: 'AIコードレビューの実践方法:\n- レビュー対象のファイルを開き、**Cmd+L**で`このコードをレビューして。観点: 可読性、パフォーマンス、セキュリティ、テスタビリティ`と依頼する\n- **注意点**:\n- AIのレビューは参考意見であり、最終判断は人間が行う\n- 機密ロジックやビジネスルールの妥当性はAIでは判断できない\n- AIの指摘を鵜呑みにせず「なぜそう提案するのか」を確認する',
        },
        {
          title: '知識共有',
          content: 'チーム内でプロンプトを共有する仕組みを作る:\n- プロジェクトの`docs/prompts/`ディレクトリに効果的なプロンプトを保存\n- `.cursorrules`にチーム共通のAI指示を記載\n- Slackの専用チャンネル（例: `#cursor-tips`）で便利な使い方を共有\n**Cmd+L**で`チーム内でAIプロンプトを共有・管理するためのベストプラクティスを提案して`と依頼する',
        },
        {
          title: 'ガイドラインの策定',
          content: '**Cmd+I**（Composer）で以下を依頼する:\n`チーム向けのCursor活用ガイドラインをMarkdownで作って。含めるセクション: 1. 目的 2. 推奨される使い方（コード生成、レビュー、ドキュメント） 3. 禁止事項（機密情報の入力、AIの出力をレビューせずコミット等） 4. セキュリティ注意事項 5. プロンプトのベストプラクティス 6. トラブルシューティング`\nチームメンバーにレビューしてもらい、フィードバックを反映する',
        },
      ],
      challenge: 'チーム向けのCursor活用ガイドラインのドラフトを作成しよう',
      hints: [
        'チームメンバーのスキルレベルに合わせたガイドラインを意識しよう',
        'やるべきこと・やらないことを明確に分けると実用的なガイドラインになる',
      ],
      checkQuestions: [
        {
          question: 'チーム開発でCursorを活用する際に最も重要なことは？',
          options: [
            '全員が同じプロンプトを使うこと',
            'AIが生成したコードをそのまま本番に使うこと',
            'チーム共通のルールとベストプラクティスを共有すること',
            '最も高価なAIモデルを使うこと',
          ],
          correctIndex: 2,
          explanation: 'チーム共通のルールとベストプラクティスを共有することで、品質の統一とチーム全体の生産性向上が実現できます',
        },
      ],
    },
    {
      id: 'day5-quest4',
      dayId: 5,
      title: 'プロンプトライブラリを作ろう',
      description: 'よく使うプロンプトを収集・テンプレート化し、チームで共有できるプロンプトライブラリを作ろう',
      difficulty: 3,
      estimatedMinutes: 25,
      targetRoles: 'all',
      steps: [
        {
          title: 'よく使うプロンプトの収集',
          content: 'Day1〜Day4で使ったプロンプトを振り返り、効果的だったものをリストアップする。例:\n- コンポーネント生成: `React + TypeScriptで[コンポーネント名]を作って...`\n- テスト生成: `このコードのテストをJest + RTLで書いて...`\n- コードレビュー: `このコードの問題点を以下の観点で分析して...`\n- ドキュメント: `このAPIのドキュメントをOpenAPI形式で...`\n最低10個のプロンプトを集める',
        },
        {
          title: 'テンプレート化',
          content: '集めたプロンプトを汎用テンプレートに変換する。**Cmd+L**で以下を依頼する:\n`以下のプロンプトを汎用テンプレートに変換して。変数部分は[角括弧]で示して:\n元: "Reactコンポーネントのテストを書いて"\nテンプレート: "[フレームワーク]の[テスト対象]のテストを[テストライブラリ]で書いて。含めるケース: [テストケース一覧]"\n残りのプロンプトも同様に変換して`',
        },
        {
          title: 'カテゴリ分類',
          content: 'テンプレートを以下のカテゴリに分類する:\n- **コード生成**: コンポーネント、API、型定義の生成\n- **コードレビュー**: バグ検出、パフォーマンス、セキュリティ\n- **リファクタリング**: 構造改善、命名改善、分割\n- **テスト**: ユニットテスト、統合テスト\n- **ドキュメント**: API仕様書、README、コメント\n**Cmd+I**（Composer）で`このプロンプト一覧をカテゴリ別にMarkdownファイルに整理して`と依頼する',
        },
        {
          title: 'チームで共有',
          content: '共有方法を決めて実行する:\n- **Git**: `docs/prompt-library.md`としてリポジトリに追加\n- **Wiki**: Notion/Confluenceにプロンプトライブラリページを作成\n- **Slack**: `#cursor-tips`チャンネルにピン留め\nターミナルで`git add docs/prompt-library.md && git commit -m "Add prompt library"`を実行\nチームメンバーに追加・更新のルール（PRベース / 直接編集OK）を伝える',
        },
      ],
      challenge: '10個以上の実用的プロンプトテンプレートを作成しよう',
      hints: [
        '用途・場面ごとにプロンプトを分類すると使いやすいライブラリになる',
        'テンプレート内の変数部分を[プロジェクト名]のように明示すると再利用しやすい',
      ],
      checkQuestions: [
        {
          question: 'プロンプトライブラリを作る最大のメリットは？',
          options: [
            'AIの利用料金を削減できる',
            '毎回ゼロからプロンプトを考える手間を省き、品質を安定させられる',
            'AIの学習データを増やせる',
            'プロンプトを暗記する必要がなくなる',
          ],
          correctIndex: 1,
          explanation: 'テンプレート化されたプロンプトを再利用することで、効率的かつ安定した品質でAIを活用できます',
        },
      ],
    },
    {
      id: 'day5-quest5',
      dayId: 5,
      title: 'セキュリティとプライバシー',
      description: 'AI利用時のセキュリティリスクとプライバシーの注意点を理解し、安全な活用方法を身につけよう',
      difficulty: 3,
      estimatedMinutes: 15,
      targetRoles: 'all',
      steps: [
        {
          title: 'AI利用時のセキュリティ注意点',
          content: 'AIにコードを送信する際のリスクを理解する:\n- **データ漏洩リスク**: AIに送信したコードが学習データに使われる可能性（プランによる）\n- **機密コードの露出**: 認証ロジック、暗号化キー、内部APIのURL\n- **対策**: Cursor Settings → Privacy で「Privacy Mode」を確認する\n**Cmd+L**で`AIコーディングツール利用時のセキュリティリスクと対策を5つ教えて`と聞いてみる',
        },
        {
          title: '機密情報の取り扱い',
          content: '以下の情報は**絶対にAIに渡さない**:\n- `.env`ファイルの内容（APIキー、DBパスワード）\n- 顧客の個人情報（名前、メール、電話番号）\n- 認証トークンやセッション情報\n- 社内専用APIのエンドポイントURL\n- ライセンスキーや暗号化キー\n代わりに: `APIキーは環境変数から取得する形で実装して。実際のキーは渡さない`のようにプレースホルダーで指示する',
        },
        {
          title: '社内ポリシー',
          content: '以下のチェックリストで社内AI利用ポリシーを確認する:\n- 会社がAIツールの利用を許可しているか\n- どのAIサービス/プランが承認されているか\n- コードのAI送信に関するガイドラインがあるか\n- AI生成コードの著作権・ライセンスに関するルールがあるか\n- インシデント発生時の報告先は決まっているか\n不明な点は情報セキュリティ担当者に確認する。**Cmd+I**で`AI利用に関するセキュリティチェックリストを作って`と依頼し、社内用にカスタマイズする',
        },
      ],
      challenge: 'AI利用時のセキュリティチェックリストを作成しよう',
      hints: [
        '.envファイルや認証情報を含むコードをAIに渡さないよう注意しよう',
        '社内のセキュリティチームに確認すべき事項をリストアップしよう',
      ],
      checkQuestions: [
        {
          question: 'AIツール利用時に最も注意すべきセキュリティ事項は？',
          options: [
            'AIの回答速度が遅いこと',
            'AIにテーマを変更されること',
            '機密情報やAPIキーをAIに送信しないこと',
            'AIが使用する電力消費量',
          ],
          correctIndex: 2,
          explanation: 'APIキー、パスワード、個人情報などの機密情報をAIに送信しないことが最も重要なセキュリティ対策です',
        },
      ],
    },
    {
      id: 'day5-quest6',
      dayId: 5,
      title: '卒業チャレンジ',
      description: '5日間で学んだ全てのスキルを活用して、総合的な実践課題に挑戦しよう',
      difficulty: 5,
      estimatedMinutes: 30,
      targetRoles: 'all',
      steps: [
        {
          title: '課題の選定',
          content: '以下のロール別課題例から1つ選ぶ（または自分の業務から選んでもOK）:\n- **FE**: ダッシュボードにダークモード切替機能を追加\n- **BE**: 既存APIにページネーションとフィルタリングを追加\n- **デザイナー**: コンポーネントライブラリ（ボタン、カード、フォーム等5種）を作成\n- **ディレクター**: チームのオンボーディング資料一式を作成\n- **非エンジニア**: 業務効率化ツール（議事録テンプレ+自動整形スクリプト）を作成',
        },
        {
          title: '計画の作成',
          content: '**Cmd+L**（チャット）で以下のプロンプトを使って計画を立てる:\n`以下の課題の実装計画を立てて: [選んだ課題の説明]。以下を含めて: 1. 必要なステップ（5〜8ステップ） 2. 各ステップの所要時間の目安 3. 使用するCursorの機能（Chat/Cmd+K/Composer） 4. 完了基準（何ができたら完成か）`\n計画を確認し、30分以内に完了できる範囲に調整する',
        },
        {
          title: '実装',
          content: '計画に沿って実装する。Day1〜4で学んだ機能を組み合わせて使う:\n- **設計フェーズ**: **Cmd+L**（チャット）で要件整理と設計相談\n- **コード生成**: **Cmd+I**（Composer）でファイル作成・複数ファイル編集\n- **部分修正**: **Cmd+K**で特定箇所の修正・最適化\n- **デバッグ**: エラーメッセージをチャットに貼り付けて解決策を聞く\n各ステップ完了後にブラウザ/ターミナルで動作確認する',
        },
        {
          title: 'レビューと改善',
          content: '完成したコード/ドキュメントを**Cmd+L**で以下のようにレビュー依頼する:\n`この成果物をレビューして。評価観点: 1. 完成度（要件を満たしているか） 2. コード品質（可読性、保守性） 3. 改善の余地 4. セキュリティ上の問題。具体的な改善案も提示して`\nフィードバックの中から最も重要な改善を2〜3個実施する',
        },
        {
          title: '振り返りと共有',
          content: '**Cmd+I**（Composer）で以下を依頼する:\n`5日間のCursor道場の振り返りレポートを作って。テンプレート:\n1. 学んだ主要スキル（Day別に1つずつ）\n2. 最も役立ったCursorの機能TOP3\n3. 卒業チャレンジの成果（何を作ったか、工夫した点）\n4. 今後の活用計画（明日から業務で使いたい機能）\n5. チームへの提案（チームに広めたい使い方）`\nレポートを完成させ、チームに共有する',
        },
      ],
      challenge: '学んだ全てのスキルを活用して、自分の業務を効率化するアイデアを実装しよう',
      hints: [
        'これまでのDay1〜Day4で学んだテクニックを組み合わせて使ってみよう',
        '完璧を目指さず、まずは動くものを作ることを優先しよう',
      ],
      checkQuestions: [
        {
          question: 'Cursorを最大限活用するために最も重要なことは？',
          options: [
            'できるだけ多くのショートカットを暗記する',
            '最新のAIモデルを常に使用する',
            '具体的なコンテキストを与えて明確な指示を出すこと',
            'AIの提案を全て受け入れること',
          ],
          correctIndex: 2,
          explanation: '具体的なコンテキストを与えて明確な指示を出すことで、AIはより正確で有用な回答を提供でき、開発効率が最大化されます',
        },
      ],
    },
  ],
};
